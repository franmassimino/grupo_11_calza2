<!DOCTYPE html>
<html lang="es">
    <%- include('../partials/head') %> 
<body>

    <%- include('../partials/header')  %> 

    <main>
        <div class="form-container">
            <h1>Editar producto</h1>
            <figure class="contImg">
                <img src="<%= product.img %> " alt="" class="imgEdit">
            </figure>
            <form action="/products/update/<%= product.id %>?_method=PUT" method="POST" id="productForm" enctype="multipart/form-data">
                <label for="imagen">Actualizar imagen de producto</label>
                <input type="file" id="imagen" name="imagen">
                <small id="imageError" class='error'>La imagen del producto debe ser formato png, jpg, jpeg o gif</small>

                <label for="marca">Marca</label>
                <select name="marca" id="marca" required>
                    <option value="" selected disabled>Seleccione una marca</option>
                    <% brands.forEach(brand => { %>
                        <option value="<%= brand.id %>">
                            <%= brand.name %>
                        </option>
                    <% }) %>
                </select>

                <label for="modelo">modelo</label>
                <input type="text" value="<%= product.model %> " name="modelo" id="modelo">
                <small id='modelError' class='error'>El nombre del modelo debe tener por lo menos 5 caracteres</small>

                <label for="precio">precio</label>
                <input type="text" value="<%= product.price %>" name="precio" id="precio" required>

                <label for="descripcion">descripcion</label>
                <textarea name="descripcion" id="descripcion"><%= product.description %></textarea>
                <small id="descriptionError" class='error'>La descripcion del producto debe tener por lo menos 20 caracteres</small>
                
                <fieldset id="categoria">
                    <legend>Categoria</legend>
                    <select name="categoria" class="categoria" required>
                        <option value="" selected disabled>Seleccione una categoria</option>
                        <% categories.forEach(category => { %>
                            <option value="<%= category.id %>">
                                <%= category.name %>
                            </option>
                        <% }) %>
                    </select>
                </fieldset>

                <fieldset id="colores">
                    <legend>Color</legend>
                    <select name="colores" class="colores" required>
                        <option value="" selected>Seleccione un color</option>
                        <% colors.forEach(color => { %>
                            <option value="<%= color.id %>">
                                <%= color.name %>
                            </option>
                        <% }) %>
                    </select>
                </fieldset>
                
                <button type="submit">Editar producto</button>
            </form>
            <form action="/products/delete/<%= product.id %>?_method=DELETE" method="post">
                <button class="delete" type="submit">Eliminar producto</button>
            </form>
        </div>
    </main>

    <%- include('../partials/footer')  %> 
    <script src="/js/productValidation.js"></script>


</body>
</html>
